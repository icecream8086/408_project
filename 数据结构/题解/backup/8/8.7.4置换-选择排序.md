# 置换选择排序与外部排序优化

## 摘要

本节讲解了置换选择排序的工作原理及其在外部排序中的应用。通过减少初始归并段的数量，置换选择排序能够显著提升外部排序的效率。传统方法受限于内存容量，而置换选择排序通过动态替换内存中的记录，生成更长的归并段，从而减少读写磁盘的次数。

## 主题

置换选择排序通过动态替换内存中的记录，生成更长的初始归并段，减少归并段数量，从而优化外部排序的效率。

> 重点难点
>
> - 理解置换选择排序如何突破内存容量的限制。
> - 掌握置换选择排序的步骤和原理。

## 线索区

### 知识点1: 归并段与外部排序的关系
- 每个归并段包含的记录越多，归并段的总数R就会更小。
- R越小，外部排序时读写磁盘的次数也会相应减少。

### 知识点2: 置换选择排序的工作原理
- 置换选择排序通过减少归并段的数量来优化外部排序的效率。
- 输出文件FO存放在磁盘中，记录输出到磁盘的过程实际上是通过输出缓冲区进行。
- 输出缓冲区满时，整个磁盘块的内容会一次性写回外存。
- 输入文件同样以磁盘块为单位读取，每次读入一整块内容，但只将一个记录挪到内存工作区。

### 知识点3: 置换选择排序的命名原因
- “置换”指的是每次选择一个更小的记录从内存工作区置换出去。
- “选择”则是因为每次选择最小的一个值进行置换。

### 知识点4: 传统初始归并段构造方法的局限性
- 传统方法通过内存工作区排序生成初始归并段，但受限于内存容量。
- 内存工作区容量为6时，每个归并段只能包含6个记录。
- 通过扩大内存工作区，可生成更长的归并段，但仍有局限性。

### 知识点5: 置换选择排序的演示
- 假设内存工作区容量为3，传统方法生成8个归并段。
- 置换选择排序通过动态替换内存中的记录，生成更长的归并段。
- 通过记录minimax值，确保归并段内部递增。
- 当内存中所有记录小于minimax时，当前归并段结束。

### 知识点6: 置换选择排序的步骤
- 构造第二个归并段时，重新利用内存中的记录。
- 通过不断替换和输出记录，生成多个归并段。
- 最终生成3个初始归并段，长度超过内存工作区容量。

## 总结区

置换选择排序通过动态替换内存中的记录，生成更长的初始归并段，减少归并段数量，从而优化外部排序的效率。传统方法受限于内存容量，而置换选择排序突破了这一限制，显著提升了外部排序的效率。理解置换选择排序的步骤和原理是掌握外部排序优化的关键。