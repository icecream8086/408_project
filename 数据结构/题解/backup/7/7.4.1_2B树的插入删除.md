# B树的插入与删除操作

## 摘要

本节视频详细讲解了B树的插入和删除操作，重点介绍了如何通过分裂和合并操作来保持B树的特性。插入操作涉及将新元素插入到终端节点，并在节点关键字超限时进行分裂；删除操作则涉及从终端节点删除关键字，并在节点关键字低于下限时进行合并或借用兄弟节点的关键字。通过这些操作，B树始终保持其核心特性，即每个节点的关键字个数在合法范围内，且关键字的值大于左子树且小于右子树。

## 主题

B树的插入和删除操作的核心在于保持每个节点的关键字个数在合法范围内。插入操作可能导致节点分裂，删除操作可能导致节点合并或借用兄弟节点的关键字。这些操作确保了B树的平衡性和高效性。

> 重点难点
>
> - **节点分裂**：插入操作中，节点关键字超限时如何进行分裂，并将中间关键字提到父节点。
> - **节点合并**：删除操作中，节点关键字低于下限时如何与兄弟节点合并，并调整父节点的关键字。
> - **B树特性保持**：在插入和删除操作中，始终保证B树的核心特性，即关键字的值大于左子树且小于右子树。

## 线索区

### 知识点1：B树的插入操作
- **插入新元素**：新元素必须插入到终端节点，使用查找算法确定具体位置。
- **节点分裂**：插入后若节点关键字超限，需进行分裂操作，将中间关键字提到父节点，并将原节点分为左右两部分。
- **分裂向上传递**：分裂操作可能继续向上级进行，直到根节点，可能导致B树高度增加。

### 知识点2：B树的删除操作
- **删除终端节点关键字**：删除操作首先删除终端节点中的关键字，若删除后节点关键字不低于下限，则操作完成。
- **删除非终端节点关键字**：删除非终端节点中的关键字时，需找到其直接前驱或直接后继来替代，最终转换为终端节点的删除操作。
- **借用兄弟节点关键字**：若删除后节点关键字低于下限，需检查其兄弟节点是否可借出关键字，并调整父节点关键字以保持B树特性。
- **节点合并**：若兄弟节点关键字不足，需将当前节点与兄弟节点合并，并合并中间的关键字。

### 知识点3：B树特性的保持
- **关键字有序性**：在插入和删除操作中，始终保证B树的核心特性，即关键字的值大于左子树且小于右子树。
- **根节点处理**：若根节点关键字个数减少到0，可以删除根节点，当前节点成为新的根节点。

## 总结区

本节内容详细介绍了B树的插入和删除操作，重点在于如何通过分裂和合并操作来保持B树的特性。插入操作可能导致节点分裂，删除操作可能导致节点合并或借用兄弟节点的关键字。通过这些操作，B树始终保持其核心特性，即每个节点的关键字个数在合法范围内，且关键字的值大于左子树且小于右子树。理解这些操作的核心逻辑，能够帮助我们在考试中临场推导处理方法。