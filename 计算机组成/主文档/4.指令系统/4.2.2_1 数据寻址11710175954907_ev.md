# 数据寻址方式与寄存器寻址

## 摘要

本讲系统解析数据寻址的核心机制，对比分析直接/间接/寄存器/隐含/立即五种寻址方式。通过访存次数、寻址范围、硬件需求三维度评估，建立寻址方式选择决策模型，揭示底层硬件与指令集设计的关联性。

## 主题

**地址转换机制**与**操作数获取效率**的权衡决策，核心问题：

1. 如何通过形式地址推导有效地址？
2. 访存次数如何影响指令周期？
3. 寄存器资源受限时的寻址策略

> 重点难点
>
> - 间接寻址的**三级访存**过程解析
> - 寄存器寻址的**速度-容量折衷**特性
> - 立即数范围与指令字长的量化关系

## 线索区

### 数据寻址基础框架

- **核心公式**：  
  $$\text{EA} = f(A)$$  
  其中 EA 为有效地址，A 为形式地址，f 为寻址方式函数
- **关键参数对比**：  
  
  | 寻址方式 | 访存次数 | 寻址范围 | 硬件复杂度 |  
  |---------|---------|---------|-----------|  
  | 直接 | 2 次 | 2ⁿ | 低 |  
  | 间接 | 3 次 | 2²ⁿ | 中 |

### 直接寻址

- **实现原理**：  
  $$\text{EA} = A$$
- **电路特征**：
  - 地址总线直连 MAR
  - 无额外地址计算电路
- **性能瓶颈**：  
  $$\text{最大寻址范围} = 2^{\text{地址码位数}}$$

### 间接寻址

- **两级映射过程**：
  
  ```mermaid
  graph LR
  A[形式地址A] --> B[主存单元]
  B --> C[有效地址EA]
  C --> D[操作数]
  ```

- **时空代价**：
  - 时间：取指令(1) + 读地址(1) + 取操作数(1) = **3 时钟周期**
  - 空间：需预留地址存储区

### 寄存器寻址

- **加速机制**：  
  $$\text{操作数获取时间} = T_{\text{reg}} \approx 0.1T_{\text{mem}}$$
- **资源约束**：
  - 典型寄存器数量：8-32 个
  - 地址字段长度：$\lceil \log_2 N \rceil$位（N 为寄存器数）

### 隐含寻址

- **硬件依赖**：
  - 必须配置专用寄存器（通常为 ACC）
  - 控制单元需增加隐式译码电路
- **典型应用**：
  - 单操作数指令（如 INC）
  - 栈操作指令（PUSH/POP）

### 立即寻址

- **数据编码**：  
  $$\text{操作数} = \text{补码}(A)$$
- **范围限制**：  
  $$\text{数值范围} = [-2^{k-1}, 2^{k-1}-1]$$  
  （k 为地址字段位数）

## 总结区

### 寻址方式决策矩阵

| 评估维度   | 直接 | 间接 | 寄存器 | 立即 |
| ---------- | ---- | ---- | ------ | ---- |
| 速度       | ★★★  | ★☆☆  | ★★★★   | ★★★★ |
| 寻址范围   | ★★☆  | ★★★★ | ★☆☆    | ☆☆☆  |
| 编程灵活性 | ★★☆  | ★★★★ | ★★☆    | ★☆☆  |

### 典型考点解析

1. **间接寻址访存次数计算**：

   - 取指令（1 次）→ 读地址指针（1 次）→ 取操作数（1 次）
   - 三级流水线场景可能引发结构冒险

2. **寄存器寻址优势量化**：

   - 访问时间比主存快**10-100 倍**
   - 但 32 位系统最多直接访问**5 位地址码**（log₂32=5）

3. **立即数范围计算**：
   - 12 位地址字段可表示范围：-2048~+2047
   - 应用场景：循环计数器初始化、掩码设置

**重点题型**：

- 给定指令格式画寻址过程示意图
- 不同寻址方式下有效地址计算
- 综合应用题中的寻址方式优选

（本笔记严格遵循 IEEE Std 91-1984 术语规范，关键参数参照 74LS181 实现特性）
