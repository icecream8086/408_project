# CPU控制器设计与微操作时序安排

## 摘要

本笔记总结了CPU控制器的设计过程，重点介绍了硬步线控制器的设计步骤、微操作的时序安排以及逻辑表达式的构建。通过分析指令在不同机器周期内的微操作序列，设计出对应的组合逻辑电路，最终实现CPU控制器的功能。

## 主题

CPU控制器的设计涉及指令执行周期的微操作安排、逻辑表达式的构建以及组合逻辑电路的设计。硬步线控制器通过纯硬件方式实现控制功能，适合RISC系统，但其设计复杂度与指令数量直接相关。

> 重点难点
>
> - 微操作的时序安排与并行执行
> - 逻辑表达式的构建与简化
> - 硬步线控制器的设计步骤与实现

## 线索区

### 知识点1：CPU控制器的设计步骤
1. **罗列指令的微操作序列**：分析每条指令在取指、鉴指、执行和中断周期内的微操作。
2. **确定控制方式**：选择定长或不定长机器周期，通常采用同步控制方式（定长机器周期）。
3. **安排微操作时序**：将微操作分配到不同的节拍（T0、T1、T2）中，确保微操作的先后顺序和并行执行。
4. **设计电路**：根据微操作的逻辑表达式，绘制组合逻辑电路图。

### 知识点2：微操作的时序安排
- **取指周期**：
  - T0：PC → MAR，CEO发送读信号。
  - T1：指令读入MDR，PC值加1。
  - T2：MDR → IR，IR → ID。
- **鉴指周期**：
  - T0：处理间接地址，读取有效地址。
  - T1：将有效地址拼接到指令的地址码部分。
- **执行周期**：
  - 不同指令的微操作不同，如CRA指令清零ACC寄存器，LDA指令加载数据到ACC寄存器。

### 知识点3：逻辑表达式的构建
- **逻辑表达式与电路的关系**：逻辑表达式是电路的数学化描述，电路设计人员通过逻辑表达式设计电路。
- **逻辑表达式的简化**：通过操作时间表，构建微操作命令的逻辑表达式，并简化为更简单的形式。
- **示例**：MM AR → M DR微操作的逻辑表达式在不同节拍和指令下的构建与简化。

### 知识点4：硬步线控制器的特性
- **优点**：纯硬件实现，指令执行速度快，适合RISC系统。
- **缺点**：指令数量多时，设计复杂，扩充新指令需要大幅修改电路。
- **适用场景**：通常用于RISC系统，CISC系统则采用微程序控制器。

## 总结区

本笔记总结了CPU控制器的设计过程，重点介绍了硬步线控制器的设计步骤、微操作的时序安排以及逻辑表达式的构建。通过分析指令在不同机器周期内的微操作序列，设计出对应的组合逻辑电路，最终实现CPU控制器的功能。硬步线控制器适合RISC系统，但其设计复杂度与指令数量直接相关。