# 总线技术概述

## 摘要

本课程系统解析总线技术核心要素，通过对比并行/串行总线架构演变，揭示总线标准制定原则及其在现代计算机系统中的工程实践价值。重点阐述总线仲裁机制、定时协议等关键技术特征。

## 主题

总线作为计算机系统的数据传输中枢，其标准化进程直接影响硬件生态发展。技术演进呈现三个显著趋势：

1. 仲裁方式：从集中式向分布式演进
2. 传输模式：并行 → 串行的技术转型
3. 协议标准：分层架构与高速差分信号应用

> 重点难点
>
> - 链式查询仲裁的"优先级固化"缺陷
> - 异步通信全互锁协议的可靠性代价
> - 串行总线突破并行架构的时钟偏移限制

## 线索区

### 知识点 1：总线基本架构

**定义**  
数字系统的共享通信通道，由数据线+控制线+地址线构成复合结构

**仲裁方式对比**  

| 类型 | 优点 | 缺点 | 延迟模型 |
|------|------|------|---------|
| 链式查询 | 电路简单 | 优先级固定 | $T_{arb}=n·t_{prop}$ |
| 计数器定时 | 动态优先级 | 需仲裁计数器 | $T_{arb}=\log_2n·t_{clock}$ |
| 独立请求 | 响应最快 | 布线复杂度高 | $T_{arb}=t_{decoder}$ |

> **同步/异步定时**

- 同步总线：全局时钟驱动（例：**PCI 总线**）  
  $\tau_{setup} < T_{clock} - t_{skew}$
- 异步总线：握手协议保障（例：**USB 2.0**）  
  全互锁协议需 2 次信号往返（$\uparrow$REQ→$\uparrow$ACK→$\downarrow$REQ→$\downarrow$ACK）

### 知识点 2：总线标准演进

**关键技术参数对比**  

| 标准 | 位宽 | 频率 | 传输模式 | 峰值带宽 |
|------|------|------|---------|----------|
| ISA (1984) | 16 位 | 8MHz | 并行 | **16MB/s** |
| PCI (1992) | 32 位 | 33MHz | 并行 | **133MB/s** |
| PCIe 3.0×16 | 串行 | 8GHz | 差分信号 | **15.75GB/s** |

> **架构革新点**

1. PCI 总线：独立于处理器的中间层架构
2. PCIe：采用数据包交换和通道聚合技术
3. USB 3.0：双总线结构（SS+HS 独立通道）

### 知识点 3：现代串行总线技术

**USB 拓扑结构**  
主机控制器 → 集线器 → 设备（最大 7 层）  
**差分信号抗干扰原理**：  
$V_{diff} = (D+) - (D-)$，共模噪声被减法器抑制

> **SATA 协议栈**

1. 物理层：8b/10b 编码
2. 链路层：CRC 校验与流控
3. 传输层：FIS（Frame Information Structure）封装

## 总结区

**核心考点**：

1. 总线仲裁三方式的特点对比（结合延迟公式记忆）
2. 同步/异步定时协议的应用场景选择依据
3. 串行总线突破并行架构瓶颈的技术路径：  
   并行问题：时钟偏移 → 串行方案：嵌入式时钟+差分信号

**典型题型**：

- 计算总线最大理论带宽（公式：$带宽=位宽×频率×传输效率$）
- 根据应用场景选择总线标准（工业控制 →CAN 总线，存储 →SAS）
- 分析总线标准演进中的技术妥协（如 PCIe 向后兼容 PCI 的软件层）

**设计趋势**：

- 从共享总线向点对点交换架构发展
- 物理层普遍采用 SerDes 技术（Serializer/Deserializer）
- 协议栈分层实现硬件解耦（如 USB 的拓扑管理层与事务层分离）
