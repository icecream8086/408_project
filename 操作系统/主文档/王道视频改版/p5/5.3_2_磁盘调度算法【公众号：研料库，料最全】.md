# 磁盘调度算法

## 摘要

通过优化寻道时间提升磁盘 I/O 效率，重点分析五种经典算法（FCFS/SSTF/SCAN/C-SCAN/C-LOOK）的调度策略与性能特征，建立算法选择与寻道时间计算的核心能力。

## 主题

磁道访问调度策略的时空权衡：在公平性与效率之间寻找平衡点，关键解决磁头移动路径优化与请求饥饿的冲突

> 重点难点
>
> - **磁头运动轨迹可视化**：不同算法的路径绘制与对比
> - **平均寻道长度计算**：算法数学模型的建立与推导
> - **极端场景推演**：高密度请求分布下的性能劣化分析
> - **现代系统适配性**：固态存储技术对传统算法的影响

---

## 线索区

### 知识点 1：磁盘 I/O 时间模型

**定义**  
机械磁盘访问时间由三部分构成：  
$$T_{access} = T_{seek} + T_{rotation} + T_{transfer}$$

> **原理公式**

1. **寻道时间**  
   $$T_{seek} = t_{startup} + n \times t_{move}$$

   - $t_{startup}$: 磁头臂启动时间（**典型值 2-3ms**）
   - $n$: 跨越磁道数
   - $t_{move}$: 单磁道移动时间（**0.1-0.3ms**）

2. **延迟时间**  
   $$T_{rotation} = \frac{1}{2R} \quad (R:转速/rpm)$$

   - 7200rpm 磁盘：**平均延迟 ≈4.17ms**

3. **传输时间**  
   $$T_{transfer} = \frac{sectors}{sectors/track} \times \frac{1}{R}$$
   - 现代磁盘参数示例：**100MB/s 传输率，0.01ms/扇区**

---

### 知识点 2：调度算法演进

#### FCFS（先来先服务）

**电路类比**：线性流水线结构

- **优势**：零饥饿风险，实现简单
- **缺陷**：可能产生"钟摆效应"，平均寻道长度最大

**数学建模**：  
$$AL = \frac{1}{n}\sum_{i=1}^{n}|C_{i} - C_{i-1}|$$

---

#### SSTF（最短寻道时间优先）

**现实类比**：贪心算法在路径规划中的应用

- **优势**：局部最优，平均寻道时间最短
- **风险**：边缘磁道请求可能长期等待（**磁道饥饿系数>30%**）

---

#### SCAN（电梯算法）

**运动特征**：双向扫描，覆盖全部磁道

- **改进版 LOOK 算法**：动态判断转向时机
- **性能瓶颈**：磁道响应时间差异可达**200%**

---

#### C-SCAN（循环扫描）

**优化点**：

1. 单向服务请求
2. 快速回程不处理请求
3. 响应时间差异降至**50%**

**数学模型**：  
$$AL_{C-SCAN} = \frac{(N_{max} - N_{min})}{k} \quad (k:请求数)$$

---

#### C-LOOK

**现代系统适配**：

- 动态调整扫描边界
- 平均寻道时间比 SCAN 减少**15-20%**
- 成为主流机械磁盘默认算法

---

## 总结区

### 算法对比矩阵

| 算法   | 平均寻道长度 | 公平性 | 适用场景     | 缺陷           |
| ------ | ------------ | ------ | ------------ | -------------- |
| FCFS   | 最大         | 优     | 低负载系统   | 性能波动大     |
| SSTF   | 最小         | 差     | 交互式系统   | 边缘磁道饥饿   |
| SCAN   | 中等         | 良     | 数据库系统   | 响应时间不均   |
| C-SCAN | 中等偏小     | 中     | 视频流服务器 | 空行程损耗     |
| C-LOOK | 次优         | 优     | 通用存储系统 | 实现复杂度较高 |

### 高频考点

1. 给定磁道请求序列，计算各算法磁头移动总量
2. 结合磁盘参数计算总访问时间
3. 分析极端请求分布下的算法行为
4. 对比 SSD 与传统磁盘的调度差异

### 实验建议

1. 使用 DiskSim 仿真器验证算法性能
2. 采集实际 I/O 负载分析算法适用性
3. 设计混合调度策略（如 SSTF+LOOK）

请确认是否需要补充特定算法的计算示例或扩展某个知识点的技术细节。
