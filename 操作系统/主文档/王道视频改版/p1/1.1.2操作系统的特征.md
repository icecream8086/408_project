# **操作系统的四个基本特征**

## **摘要**

本部分详细解析了操作系统的四个基本特征：**并发**、**共享**、**虚拟**和**异步**。这些特征是操作系统设计和实现的核心基础，理解它们对于掌握操作系统的原理至关重要。

---

## **主题**

1. **并发与共享**

   - 并发和共享是操作系统最基本的特征，二者互为存在条件。
   - 没有并发就没有共享，反之亦然。

2. **虚拟性**

   - 通过虚拟技术（如虚拟存储器和虚拟处理器）将物理资源映射为多个逻辑资源，提高资源利用率。

3. **异步性**
   - 多道程序并发执行时，进程的执行速度不可预知，走走停停，这是资源有限和进程争抢资源的结果。

---

### **重点难点**

- **并发与并行的区别**
- **互斥共享与同时共享的区别**
- **虚拟技术的分类与应用**
- **异步性的原因与表现**

---

### **知识点详解**

#### **知识点 1：并发与并行**

- **并发**

  - 定义：多个事件在同一时间间隔内发生，宏观上同时，微观上交替。
  - 示例：老渣交替进行两个约会任务。
  - 特点：通过时间片轮转实现多个任务的“同时”执行。

- **并行**

  - 定义：多个事件在同一时刻同时发生。
  - 示例：小渣同时进行两个约会任务。
  - 特点：需要多核或多处理器支持。

- **对比**
  - 并发是逻辑上的同时，并行是物理上的同时。

---

#### **知识点 2：共享性**

- **互斥共享**

  - 定义：资源在同一时间段内只允许一个进程使用。
  - 示例：QQ 和微信视频聊天时，摄像头只能被一个进程使用。
  - 特点：通过锁机制实现资源的独占访问。

- **同时共享**
  - 定义：资源在同一时间段内允许多个进程访问。
  - 示例：QQ 和微信同时发送文件，宏观上同时，微观上交替访问硬盘。
  - 特点：通过分时复用技术实现资源的共享。

---

#### **知识点 3：虚拟性**

- **虚拟存储器**

  - 定义：将物理内存和磁盘空间结合，扩展可用内存空间。
  - 示例：4G 内存的电脑可以同时运行多个需要超过 4G 内存的应用程序。
  - 特点：通过页面置换算法（如 LRU）管理内存和磁盘之间的数据交换。

- **虚拟处理器**
  - 定义：通过时间片轮转技术，使单核 CPU 模拟多核 CPU 的效果。
  - 示例：单核 CPU 通过虚拟处理器技术，使得用户感觉有多个 CPU 在同时服务。
  - 特点：通过调度算法（如 CFS）实现多任务的公平执行。

---

#### **知识点 4：异步性**

- **定义**

  - 多道程序并发执行时，进程的执行速度不可预知，走走停停。
  - 原因：资源有限，进程争抢资源导致执行顺序不确定。

- **表现**
  - 进程的执行时间不可预测，可能因为等待 I/O 或资源而被挂起。
  - 示例：多个进程同时请求 CPU 时间片，执行顺序由调度器决定。

---

## **总结**

1. **并发与共享**

   - 并发和共享是操作系统最基本的特征，二者互为存在条件。
   - 没有并发就没有共享，反之亦然。

2. **虚拟性**

   - 通过虚拟技术将物理资源映射为多个逻辑资源，提高资源利用率。

3. **异步性**

   - 多道程序并发执行时，进程的执行速度不可预知，走走停停，这是资源有限和进程争抢资源的结果。

4. **考试重点**
   - 并发与并行的区别
   - 互斥共享与同时共享的区别
   - 虚拟技术的分类与应用
   - 异步性的原因与表现

---

### **实验与代码示例**

#### **并发示例（Python）**

```python
import threading

def task(name):
    print(f"Task {name} is running")

threads = []
for i in range(5):
    t = threading.Thread(target=task, args=(i,))
    threads.append(t)
    t.start()

for t in threads:
    t.join()
```

#### **互斥共享示例（C）**

```c
#include <pthread.h>
#include <stdio.h>

pthread_mutex_t lock;

void* task(void* arg) {
    pthread_mutex_lock(&lock);
    printf("Thread %d is using the resource\n", *(int*)arg);
    pthread_mutex_unlock(&lock);
    return NULL;
}

int main() {
    pthread_t threads[5];
    int ids[5] = {1, 2, 3, 4, 5};
    pthread_mutex_init(&lock, NULL);

    for (int i = 0; i < 5; i++) {
        pthread_create(&threads[i], NULL, task, &ids[i]);
    }

    for (int i = 0; i < 5; i++) {
        pthread_join(threads[i], NULL);
    }

    pthread_mutex_destroy(&lock);
    return 0;
}
```
