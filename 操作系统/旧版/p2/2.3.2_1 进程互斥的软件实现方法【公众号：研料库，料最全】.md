# 进程互斥与皮特森算法

## 摘要

本节内容主要介绍了进程互斥的几种软件实现方法，重点讲解了皮特森算法的核心思想及其实现方式。通过分析单标志法、双标志先检查法和双标志后检查法的优缺点，引出皮特森算法如何结合这些方法的思想，解决进程互斥问题。最后总结了皮特森算法的优缺点及其在实际应用中的表现。

## 主题

本节主题围绕进程互斥的软件实现方法展开，重点介绍了皮特森算法的核心思想及其实现方式。通过分析不同算法的优缺点，帮助学生理解如何通过软件方法实现进程互斥，并掌握皮特森算法的谦让逻辑。

> 重点难点
>
> - 皮特森算法的核心思想：主动争取、主动谦让和检查对方的意愿。
> - 双标志先检查法和双标志后检查法的优缺点。
> - 皮特森算法如何解决进程互斥问题，并满足空闲让进、忙则等待和有限等待原则。

## 线索区

### 知识点1：单标志法的实现与缺点
- **思想**：通过`TURN`变量表示当前允许哪个进程进入临界区，进程在访问完临界区后将权限转交给另一个进程。
- **缺点**：各进程只能轮流使用临界区，若对方不使用资源，当前进程即使资源空闲也无法访问，违反了空闲让进原则。

### 知识点2：双标志先检查法的思想与问题
- **思想**：通过布尔型数组标记各进程是否想进入临界区，进程在进入临界区前先检查对方是否想进入。
- **问题**：在并发运行时，检查和上锁动作不能原子化，可能导致两个进程同时进入临界区，违反忙则等待原则。

### 知识点3：双标志后检查法的思想与问题
- **思想**：进程先表达进入临界区的意愿，再检查对方是否想进入。
- **问题**：在并发运行时，可能双方都表达进入意愿，导致所有进程都无法进入临界区，违反空闲让进原则。

### 知识点4：皮特森算法的核心思想与实现
- **思想**：结合单标志法和双标志法的思想，进程在进入区主动表达意愿并谦让，通过`flag`数组和`turn`变量实现进程间的谦让和优先权分配。
- **实现**：每个进程在进入临界区前设置自己的`flag`为`true`，并将`turn`设为对方的编号，表示谦让。进程在进入区检查对方的`flag`和`turn`值，确保有序访问临界区资源。

### 知识点5：皮特森算法的优缺点
- **优点**：满足空闲让进、忙则等待和有限等待原则，能够有效解决进程互斥问题。
- **缺点**：不遵循让全等待原则，进程在无法进入临界区时仍占用CPU资源。

## 总结区

本节内容详细介绍了进程互斥的几种软件实现方法，重点讲解了皮特森算法的核心思想及其实现方式。通过分析单标志法、双标志先检查法和双标志后检查法的优缺点，帮助学生理解如何通过软件方法实现进程互斥，并掌握皮特森算法的谦让逻辑。皮特森算法通过结合单标志法和双标志法的思想，有效解决了进程互斥问题，但在实际应用中仍存在一定的局限性。