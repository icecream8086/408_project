# 死锁预防策略与资源分配

## 摘要

本节视频主要介绍了死锁预防的几种策略，包括破坏互斥条件、不剥夺条件、请求和保持条件以及循环等待条件。通过具体案例和资源分配策略，分析了每种策略的优缺点及其对系统性能的影响。最后，强调了理解死锁产生的四个必要条件的重要性，并建议在学习过程中将前后知识联系起来，形成网状知识结构。

## 主题

死锁预防策略的核心是通过破坏死锁产生的四个必要条件之一来避免死锁。具体策略包括：

- **破坏互斥条件**：通过技术手段（如spooling技术）将互斥资源改造为共享资源。
- **破坏不剥夺条件**：通过进程主动释放资源或操作系统强制剥夺资源来避免死锁。
- **破坏请求和保持条件**：采用静态分配方法，进程在运行前一次性申请所有资源。
- **破坏循环等待条件**：通过顺序资源分配法，按资源编号递增顺序请求资源。

> 重点难点
>
> - 理解死锁产生的四个必要条件及其破坏方法。
> - 分析每种死锁预防策略的优缺点及其对系统性能的影响。
> - 掌握顺序资源分配法的具体实现及其对循环等待条件的破坏。

## 线索区

### 知识点1：死锁预防策略概述
- 死锁处理的几种策略：预防、避免、检测和解除。
- 本节重点介绍预防死锁的策略，即破坏死锁产生的四个必要条件之一。

### 知识点2：破坏互斥条件
- 互斥条件是指必须互斥使用的资源，可能导致死锁。
- 通过技术手段（如spooling技术）将互斥资源改造为共享资源。
- 以打印机为例，说明spooling技术如何避免死锁。

### 知识点3：破坏不剥夺条件
- 不剥夺条件是指进程在资源未使用完前不能被其他进程强行夺走。
- 提出两种破坏不剥夺条件的方案：进程主动释放资源和操作系统强制剥夺资源。
- 讨论剥夺调度方式的优缺点，特别是对系统复杂性和资源利用率的影响。

### 知识点4：破坏请求和保持条件
- 请求和保持条件是指进程在保持资源的同时请求新资源。
- 采用静态分配方法，进程在运行前一次性申请所有资源，避免请求和保持条件。
- 讨论静态分配方法的缺点，如资源浪费和进程饥饿现象。

### 知识点5：破坏循环等待条件
- 循环等待条件是指存在进程资源的循环等待链，每个进程已获得的资源同时被下一个进程请求。
- 可以通过顺序资源分配法破坏循环等待条件，即给资源编号并按编号递增顺序请求资源。
- 进程只有占有小编号资源时，才能申请更大编号资源，避免逆向申请。
- 这种策略确保不会发生循环等待链。

### 知识点6：资源编号与进程执行
- 假设系统中有10个资源，编号为1到10，P1、P2、P3进程分别占用不同编号的资源。
- 系统总会有一个进程拥有最大编号的资源，且大于该编号的资源是空闲的。
- P3进程可以顺利获得所有所需资源并执行结束，避免了死锁。

### 知识点7：破坏循环等待条件的缺点
- 新增设备需要重新编号，不方便。
- 进程使用资源的顺序与编号递增顺序不一致时，可能导致资源浪费。
- 用户编程时必须按照编号递增顺序申请资源，增加了编程复杂性。

### 知识点8：死锁预防策略的总结
- 预防死锁的策略或多或少存在缺陷，理解死锁产生的四个必要条件更为重要。
- 在学习过程中，应将前后知识联系起来，形成网状知识结构，而非孤立的知识点。

### 知识点9：复习与联系
- 复习时，可以结合哲学家进餐问题中的三种处理死锁方法，分析它们分别破坏了哪个条件。
- 复习考研时，将前后知识联系起来是关键，帮助形成完整的知识体系。

## 总结区

本节视频详细介绍了死锁预防的几种策略，包括破坏互斥条件、不剥夺条件、请求和保持条件以及循环等待条件。通过具体案例和资源分配策略，分析了每种策略的优缺点及其对系统性能的影响。最后，强调了理解死锁产生的四个必要条件的重要性，并建议在学习过程中将前后知识联系起来，形成网状知识结构。复习时可以结合哲学家进餐问题中的三种处理死锁方法，分析它们分别破坏了哪个条件，帮助形成完整的知识体系。