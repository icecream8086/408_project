# IO控制方式

## 摘要

本节内容介绍了四种IO控制方式：程序直接控制方式、中断驱动方式、DMA方式和通道控制方式。重点分析了每种方式的流程、CPU干预频率、数据传输单位以及数据流向，并总结了各自的优缺点。最终目标是减少CPU对IO过程的干预，提高系统效率。

## 主题

IO控制方式的发展历程及其核心机制，重点关注CPU干预频率和数据传输效率的提升。

> 重点难点
>
> - 程序直接控制方式的轮询机制及其效率问题
> - 中断驱动方式的中断机制及其对CPU性能的影响
> - DMA方式的数据块传输及其对CPU干预频率的降低
> - 通道控制方式的并行处理能力及其硬件复杂性

## 线索区

### 知识点1：程序直接控制方式
- **核心机制**：CPU通过轮询不断检查IO设备状态，数据以字为单位传输。
- **流程**：
  1. CPU发出读指令。
  2. IO控制器启动设备并设置状态为忙碌。
  3. CPU轮询检查设备状态。
  4. 设备准备好数据后，数据传送到IO控制器。
  5. CPU从数据寄存器读取数据并转存到内存。
- **优缺点**：
  - 优点：实现简单，适用于低速设备。
  - 缺点：CPU干预频率高，效率低，不适合高速设备。

### 知识点2：中断驱动方式
- **核心机制**：引入中断机构，允许CPU在IO操作期间切换到其他进程。
- **流程**：
  1. CPU发出IO指令后切换到其他进程。
  2. IO完成时，IO控制器向CPU发出中断信号。
  3. CPU处理中断后恢复被阻塞的进程。
- **优缺点**：
  - 优点：CPU和IO设备可以并行工作。
  - 缺点：每次中断只能读入一个字的数据，频繁中断影响系统性能。

### 知识点3：DMA方式
- **核心机制**：通过DMA控制器直接读写内存，减少CPU干预频率，数据以块为单位传输。
- **流程**：
  1. CPU发出读写指令并指定数据存放位置和数据量。
  2. DMA控制器完成数据传输后向CPU发出中断信号。
  3. CPU介入后续处理。
- **优缺点**：
  - 优点：数据传输效率提升，CPU介入频率降低。
  - 缺点：CPU每次只能读写连续的数据块，处理离散数据块时需要多条IO指令。

### 知识点4：通道控制方式
- **核心机制**：通道作为弱化版的CPU，执行通道程序完成IO操作，CPU仅在任务分配和完成时介入。
- **流程**：
  1. CPU发出IO指令并指明通道程序的位置。
  2. 通道根据程序指示完成IO操作。
  3. 通道完成任务后向CPU发送中断信号。
- **优缺点**：
  - 优点：CPU、通道和IO设备可以并行工作，资源利用率高。
  - 缺点：实现复杂，需要专门的硬件支持。

## 总结区

- **程序直接控制方式**：CPU频繁干预IO操作，效率低，适用于低速设备。
- **中断驱动方式**：通过中断机制提高CPU和IO设备的并行性，但频繁中断影响性能。
- **DMA方式**：通过直接存储器存取减少CPU干预频率，数据以块为单位传输，提升系统性能。
- **通道控制方式**：通道作为弱化版CPU执行IO操作，进一步降低CPU干预频率，但硬件实现复杂。

**考点**：
- 四种IO控制方式的流程、优缺点及适用场景。
- CPU干预频率与数据传输效率的关系。
- 通道控制方式与DMA方式的区别及其对系统性能的影响。