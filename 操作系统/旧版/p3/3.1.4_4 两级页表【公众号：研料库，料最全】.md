# 两级页表与虚拟存储技术

## 摘要

本节介绍了两级页表的概念及其在虚拟存储技术中的应用。通过将单级页表拆分为多级页表，解决了页表连续存放和常驻内存的问题。同时，讲解了逻辑地址到物理地址的转换过程，以及多级页表的仿存次数和细节分析。

## 主题

两级页表通过将大页表拆分为小分组，解决了单级页表连续存放和常驻内存的问题。虚拟存储技术允许在需要访问页面时才将其调入内存，减少内存占用。多级页表的仿存次数为N+1次，其中N为页表级数。

> 重点难点
>
> - 理解两级页表的逻辑地址结构及其地址转换过程。
> - 掌握多级页表的仿存次数及其对访问时间的影响。
> - 理解虚拟存储技术如何通过缺页中断减少内存占用。

## 线索区

### 知识点1：两级页表的概念与实现
- **单级页表的问题**：页表必须连续存放，占用大量连续内存空间；进程不需要整个页表常驻内存。
- **两级页表的解决方案**：将页表拆分为多个小分组，每个分组占满一个内存块，并建立页目录表记录分组的位置。
- **逻辑地址结构**：32位逻辑地址空间，页表项大小为4B，页面大小为4KB。将大页表拆分为1024个小页表，每个小页表包含1024个页表项。

### 知识点2：逻辑地址到物理地址的转换
- **页号拆分**：页号被拆分为一级页号和二级页号，各占十位二进制。
- **地址转换过程**：
  1. 通过PCB确定页目录表在内存中的位置，查询一级页号对应的页表项。
  2. 二级页号用于查询二级页表，确定最终访问的内存块号和页内偏移量。
  3. 物理地址的计算基于内存块号和页内偏移量。

### 知识点3：多级页表的仿存次数与虚拟存储技术
- **仿存次数**：多级页表的仿存次数为N+1次，其中N为页表级数。两级页表访问逻辑地址需要三次仿存。
- **虚拟存储技术**：允许在需要访问页面时才将其调入内存，减少内存占用。页表项增加标志位，表示页面是否已调入内存，未调入时产生缺页中断。

## 总结区

本节重点讲解了两级页表的概念及其在虚拟存储技术中的应用。通过将单级页表拆分为多级页表，解决了页表连续存放和常驻内存的问题。逻辑地址到物理地址的转换过程包括页号拆分和多级页表查询。多级页表的仿存次数为N+1次，增加了访问时间，但提高了内存利用率。虚拟存储技术通过缺页中断减少内存占用，是操作系统中的重要技术。