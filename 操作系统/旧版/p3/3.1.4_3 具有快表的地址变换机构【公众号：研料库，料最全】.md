# 快表（TLB）与地址变换

## 摘要

本视频介绍了快表（TLB）的基本概念、工作原理及其在计算机系统中的重要作用。通过局部性原理，快表能够缓存最近访问的页表项，显著加速地址变换过程，提升系统性能。视频还对比了快表与慢表的性能差异，并讨论了存储设备的分层结构与成本性能权衡。

## 主题

快表（TLB）是一种高速缓存，用于加速地址变换过程。它通过缓存最近访问的页表项，减少了对内存中慢表的访问次数，从而大幅提升了系统性能。局部性原理是快表高效工作的基础，快表的命中率通常很高，能够覆盖大部分常用的页表项。

> 重点难点
>
> - **局部性原理**：时间局部性和空间局部性如何影响快表的命中率。
> - **快表与慢表的性能对比**：快表命中与未命中时的地址变换时间差异。
> - **存储设备的分层结构**：硬盘、内存、高速缓存和快表之间的速度与成本权衡。

## 线索区

### 知识点1：快表的基本概念与作用
- 快表（TLB）是一种高速缓存，专门用于加速地址变换过程。
- 快表存放最近访问过的页表项副本，访问速度比内存中的慢表快很多。
- 引入快表后，内存中的页表被称为“慢表”，访问速度较慢。

### 知识点2：局部性原理与快表命中率
- **时间局部性**：程序在短时间内会重复访问相同的指令和数据。
- **空间局部性**：程序倾向于访问相邻的存储单元。
- 基于局部性原理，快表的命中率通常可以达到90%以上。

### 知识点3：快表与慢表的性能对比
- **快表命中**：地址变换仅需1微秒。
- **快表未命中**：需要查询内存中的慢表，耗时100微秒。
- 假设快表命中率为90%，系统访问逻辑地址的平均耗时为111微秒。

### 知识点4：存储设备的分层结构与成本性能权衡
- **硬盘**：速度慢但容量大，成本低。
- **内存**：速度快但容量小，成本较高。
- **高速缓存**：速度更快，容量更小，成本更高。
- 系统采用多级存储设备，兼顾性能和成本。

### 知识点5：快表在操作系统中的应用
- 快表在进程切换时会被清空。
- 进程访问逻辑地址时，先查询快表，若未命中则访问内存中的慢表，并将查询结果存入快表。
- 通过快表和慢表的配合，CPU可以快速获取物理地址，访问内存单元。

## 总结区

快表（TLB）通过缓存最近访问的页表项，显著提高了地址变换的速度，提升了系统整体性能。局部性原理是快表高效工作的基础，快表的命中率通常很高，能够覆盖大部分常用的页表项。快表与慢表的性能对比显示了快表在减少地址变换时间方面的巨大优势。存储设备的分层结构与成本性能权衡是计算机系统设计中的重要考虑因素。