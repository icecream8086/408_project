# 请求分页管理方式

## 摘要

请求分页管理方式是基本分页管理方式的扩展，用于实现虚拟内存管理技术。它通过新增的请求调页和页面置换功能，解决了内存不足时页面调入和调出的问题。请求分页管理的页表机制新增了状态位、访问字段、修改位和外存位置字段，以支持页面调入、置换和访问记录。缺页中断机构用于处理页面未调入内存的情况，地址变换过程则涉及查询页表、处理缺页中断和可能的页面置换。

## 主题

请求分页管理方式通过新增页表字段和引入缺页中断机构，实现了虚拟内存管理和页面置换功能。地址变换过程在请求分页管理中更为复杂，需处理缺页中断和页面置换。

> 重点难点
>
> - 页面调入和页面置换的实现机制
> - 缺页中断的处理流程
> - 页表新增字段的作用和意义

## 线索区

### 请求分页管理方式的基本概念
- 请求分页管理方式是对基本分页管理方式的扩展，用于实现虚拟内存管理技术。
- 新增功能包括请求调页和页面置换。

### 请求分页管理的页表机制
- 页表新增字段：
  - **状态位**：表示页面是否已调入内存。
  - **访问字段**：记录页面访问情况，用于页面置换时决定换出哪个页面。
  - **修改位**：标记页面是否被修改过，未修改的页面无需写回外存。
  - **外存位置**：记录页面在外存中的存放位置。

### 缺页中断机构
- 缺页中断用于处理页面未调入内存的情况。
- 当访问逻辑地址时，若页面未调入内存，则产生缺页中断。
- 缺页中断处理程序负责将页面从外存调入内存，并阻塞当前进程直到调页完成。
- 若内存无空闲块，则需通过页面置换算法淘汰一个页面。

### 地址变换过程
- 请求分页存储管理在地址变换时需要额外处理缺页中断和页面置换。
- 地址变换过程涉及查询页表、处理缺页中断和可能的页面置换。

### 快表与慢表的关系
- 快表命中表示页面在内存中，若页面被换出外存，快表项应被删除。
- 快表命中可直接根据内存块号和页内偏移量得到物理地址。

### 页面访问与修改位的处理
- 只有执行写指令时才会修改页面的修改位，读指令不需要。
- 页面访问后只需修改快表中的数据，删除快表项时才需将数据复制回慢表。

### 页面换入换出的IO操作
- 页面换入换出需要启动IO硬件，频繁的换入换出会导致系统等待IO操作，影响性能。

### 页面调入后的页表修改
- 页面调入内存后需修改内存中的页表，并将页表项复制到快表中。
- 缺页时，地址变换步骤包括查询快表、查询慢表、调入页面并修改页表和快表。

## 总结区

请求分页管理方式通过新增页表字段和引入缺页中断机构，实现了虚拟内存管理和页面置换功能。地址变换过程在请求分页管理中更为复杂，需处理缺页中断和页面置换。重点难点包括页面调入和页面置换的实现机制、缺页中断的处理流程以及页表新增字段的作用和意义。建议通过课后习题进一步巩固本节内容。