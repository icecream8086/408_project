# 网络核心

## 摘要

**目的**：理解网络核心的两种主要交换方式——电路交换与分组交换。

**方法**：分析每种交换方式的特点、优缺点及适用范围。

**结果**：电路交换适用于传统电话网络，而分组交换适用于计算机网络的数据传输。

**结论**：分组交换在计算机网络中更为高效。

## 主题

电路交换与分组交换

- 电路交换：为每个呼叫预留专有电路，适用于电话网。
- 分组交换：将数据分成分组，通过网状网络传输，适用于计算机网络。

> 重点难点
>
> - 电路交换需要为每个呼叫预留端到端资源，容易导致资源浪费。
> - 分组交换通过存储-转发方式传输数据，网络带宽按需分配，适用于突发性数据传输。

## 线索区

### **电路交换**

- **电路交换**
  - 为每个呼叫预留专有电路
  - 连接建立时间长，资源浪费大
  - 适用于电话网
  - **将频宽分成片**
    - 频分 [FDM] (交换节点间的有效通信频率覆盖范围水平划分为小片段( `频率轴（x 轴）和时间轴（y 轴）` ),找个空闲片段)
    - 时分 [TDM] 通信能力按时间一片一片划分，参考时间片轮转流水线，将一段时间范围若干份，每个用户依次轮换，到自己那段才能传输数据
    - 波分 [WDM] (光通信,(类似频分,交换节点间的有效通信频率覆盖范围水平划分为小片段( `波段轴（x 轴）和时间轴（y 轴）` ),找个空闲片段))
    - 统计多路复用 [] 主要分组交换,划分时间片方式不固定,分组没固定模式

使用信令,使用端到端挑出未使用的片，获得独享线路，即可双向通信

使用 piece，线路独享，带宽性能极有保障,有原子性

一旦没有使用就会陷入浪费

计算机和计算机之间不是持续通信，突发性强，不适用电路交换

可靠性不高，核心节点极为重要，宕机后所有链路失效，需要严格控制映射关系

> 案例 传播延迟

$$
% 16:07-20:30 详细讲
\begin{align*}
&\text{在一个电路交换网络上，从主机A到主机B发送一个640,000比特的文件需要多长时间？} \\
&\text{所有的链路速率为1.536 Mbps} \\
&\text{每条链路使用时隙数为24的TDM} \\
&\text{建立端-端的电路需500 ms} \\
&\text{每条链路的速率（一个时间片）：} \\
&\frac{1.536 \text{Mbps}}{24} = 64 \text{kbps} \\
&\text{传输时间：} \\
&\frac{640 \text{kb}}{64 \text{kbps}} = 10 \text{s} \\
&\text{总时间：传输时间 + 建立链路时间} \\
&10 \text{s} + 500 \text{ms} = 10.5 \text{s} \\
\end{align*}
$$

---

todo ... [25:39]

### 分组交换

- **分组交换**
  - 将数据分成分组，按需分配带宽,代价则是可能丢失,分组可能被丢弃
  - 适用于计算机网络
  - 通过存储-转发方式传输数据
  - 可以共享资源，允许更多用户使用网络
  - 超大流量容易导致网络拥塞

数据被分成一个个单位，称为组(package)，每个节点先存下后转发，延迟略高，获取了共享性

不再作为 piece

没有存储转发机制他就是占用了全部带宽的分组交换,需要`排队`，没数据则不占用网络资源,如果路由器缓存耗尽，分组则被抛弃。

[34:29]

长度为 L 的分组相当于整个数据包，建立连接以后，这个数据包发送端发出去接收端就开始接收了

发和接时间是一回事

数据报(datagram) 的工作原理
在通信之前,无须建立起一个连接,有数据就传输
每一个分组都独立路由(路径不一样,可能会失序)
路由器根据分组的目标地址进行路由

分组的存储转发一段一段从源端传到目标端，按照有无网络层的连接

> **数据报网络**

- 分组的目标地址决定下一跳
- 在不同的阶段，路由可以改变
- 类似：问路
- Internent

数据报网络，又称无连接网络，在这种网络中，每个数据包独立传输，不需要事先建立连接。数据包根据其目标地址，逐跳进行路由选择。路由器只负责查表-转走

> **虚电路网络**

- 每个分组都带标签（虚电路标识 VC ID），标签决定下一跳
- 在呼叫建立时决定路径，在整个呼叫中路径保持不变
- 路由器维持每个呼叫的状态信息
- X.25 和 ATM

虚电路网络是一种基于连接的网络模式，在通信开始前，需要先建立一个逻辑连接，称为“虚电路”。每个分组带有虚电路标识 (VC ID)，表明其属于哪个虚电路。路径在呼叫建立时确定，并在整个呼叫过程中保持不变，因此每个分组按照预定路径传输。

虚电路网络就像打电话。你在拨号前需要先接通线路，一旦接通，你和对方的线路会保持连接直到通话结束。在这个过程中，每一句话（分组）都会沿着相同的线路传递。而这个线路在开始通话时就已经确定了。X.25 和 ATM 网络就是这种打电话的模式。

算来自网络层的链接。 面向连接网络是在通信之前建立固定路径，而有连接协议则是通过控制和确认机制来确保数据的可靠传输。

本质上来说，就是数据报是根据路由表实时确定转发路径的，虚电路是按照先前连接规划的线路转发

### trivial

`面向连接`

面向连接（例如虚电路网络）：就像打电话。在你打电话之前，你需要先接通线路，一旦接通，你和对方的线路会保持连接直到通话结束。在这个过程中，每一句话（分组）都会沿着相同的线路传递。

`有连接`
有连接（例如面向连接的传输控制协议 TCP）：就像寄一封保证到达的包裹。你在寄包裹之前，需要写好寄件人和收件人的地址，并且邮局会跟踪包裹的传递过程，确保包裹能够安全到达目的地。如果中途出现问题，邮局会重新尝试递送，直到包裹到达目的地。

## 总结区

电路交换为每个呼叫预留专有资源，适用于电话网络，但不适合计算机网络。分组交换通过存储-转发方式传输数据，资源共享，适用于计算机网络的突发性数据传输。

总体来说，分组交换更为高效，但需要应对可能的网络拥塞问题。

数据报网络无连接，分组独立路由；虚电路网络需建立逻辑连接，路径固定。
