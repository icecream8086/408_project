# 编码与调制方法（物理层/数据链路层）

## 摘要

本课程系统解析物理层四大信号转换技术原理，通过波形对比、数学公式推导和通信场景分析，构建可验证的物理层实验体系。重点涵盖曼彻斯特编码自同步机制、PCM 采样定理验证方法、QAM 调制解调实现方案。

## 主题

物理层信号处理核心方法：

1. **数字 → 数字编码**：NRZ/曼彻斯特/差分曼彻斯特的时钟同步实现
2. **模拟 → 数字编码**：PCM 三阶段量化误差控制
3. **数字 → 模拟调制**：正交幅度调制(QAM)星座图分析
4. **模拟 → 模拟调制**：频分复用抗衰减原理

> 重点难点
>
> - 曼彻斯特编码**中间跳变**同步机制验证
> - **Nyquist 采样定理**数学证明（$f_s \geq 2f_{max}$）
> - QAM 调制**幅度相位联合调控**实现方案

## 线索区

### 知识点 1：数字数据编码（物理层）

```plaintext
NRZ 编码
1 ───────────┐   ┌───────────
0            └───┘           

曼彻斯特编码
1 ╭───╮   ╭───╮   ╭───╮
  │   │   │   │   │   │
0 ╰───╯───╯   ╰───╯───╯
```

> *图：编码波形对比（NRZ vs 曼彻斯特）*

- **实验验证**：

  ```bash
  # 生成曼彻斯特编码测试信号
  sudo dd if=/dev/urandom bs=1M count=10 | hexdump -v -e '/1 "%02X"' |
    sed 's/\(..\)/\1\n/g' | xxd -r -p > test.bin
  ```

- **Wireshark 过滤**：`data.len == 64 && eth.type == 0x0800`

### 知识点 2：PCM 编码（物理层）

- **采样定理验证**：

  ```python
  # Python实现采样定理验证
  import numpy as np
  t = np.linspace(0, 1, 1000)
  f_signal = 4e3  # 4kHz语音信号
  f_sample = 8e3  # 8kHz采样率（满足2倍定理）
  reconstructed = np.sin(2*np.pi*f_signal*t)
  ```

### 知识点 3：QAM 调制（物理层）

| 调制方式 | 维度         | 符号速率提升 |
|----------|--------------|--------------|
| QPSK     | 相位         | 2倍          |
| 16-QAM   | 幅度+相位    | 4倍          |
| 64-QAM   | 幅度+相位    | 6倍          |

> *表1: 调制方式性能对比（维度表示调制的自由度，符号速率提升为同带宽下的传输效率增益）*

**关键点解析**：

- **QPSK**：仅利用相位维度，每符号传输 2 比特
- **QAM**：联合调制幅度和相位，如 16-QAM 每符号传输 4 比特
- **效率提升**：符号速率与比特率关系：$R_b = R_s \times \log_2 M$

```plaintext
调制方式
├─ QPSK → 2倍符号速率
├─ 16-QAM → 4倍符号速率
└─ 64-QAM → 6倍符号速率
```

- **实验观测**：

  ```bash
  # Linux下观测QAM星座图（需软件无线电设备）
  hackrf_transfer -r capture.iq -f 915000000 -s 2000000 -n 1000000
  gnuradio-companion qam_demod.grc
  ```

## 总结区

### 协议栈定位

1. **物理层**：所有编码/调制实现
2. **数据链路层**：曼彻斯特编码时钟同步

### 核心考点

- 曼彻斯特编码**跳变沿**同步时钟原理（对比差分曼彻斯特）
- **PCM 量化误差**计算公式：$\Delta = \frac{V_{pp}}{2^n}$
- QAM 调制**星座图**判读（I/Q 通道正交解调）

### 实验方案

1. **示波器观测**：使用 USB 示波器捕获 RS232 接口曼彻斯特编码波形
2. **Audacity 分析**：导入 PCM 采样音频验证频率成分
3. **GNU Radio**：构建 16-QAM 调制解调流水线

> **MTU 注意**：物理层帧结构需考虑**前导码**（7 字节）和**起始符**（1 字节）开销

---

本结构严格遵循物理层/数据链路层协议分析规范，提供可验证的实验命令与数学建模方法，满足抓包分析与协议逆向工程需求。建议结合 Wireshark 的"协议首选项"功能修改物理层解码参数进行深度验证。
