# 计算机网络性能指标与实验详解

## 摘要

本课程系统解析计算机网络四大核心性能指标（时延、带宽、RTT、利用率），通过安检流程类比建立直观认知，结合Wireshark实验验证理论模型，揭示实际网络速度与理论带宽差异的本质原因。

## 主题

网络性能量化分析方法与关键指标测量原理，重点掌握时延构成要素与利用率对网络性能的非线性影响。

### **重点难点**

> - **时延分类计算**：发送时延与传播时延的物理本质差异
> - **时延-利用率曲线**：U=0.5时D倍增的临界现象
> - **带宽单位陷阱**：bps与Byte/s的8倍换算关系

## 线索区

### 知识点1：时延四元模型

1. **发送时延**（Transmission Delay）  
   `公式：D_trans = L/R`  
   - L：数据帧长度（bits）
   - R：信道带宽（bps）
   - *实验验证：*  

     ```bash
     # Linux系统发送测试
     ping -s 1472 -M do 192.168.1.1  # 测试MTU分片时延
     ```

2. **传播时延**（Propagation Delay）  
   `公式：D_prop = d/v`  
   - d：物理链路长度（meters）
   - v：传播速率（~2×10⁸ m/s）

3. **排队时延**（Queuing Delay）  
   - 符合M/M/1排队模型：`E[T] = (1/μ) / (1 - ρ)`  
   - ρ=λ/μ（到达率/服务率）

4. **处理时延**（Processing Delay）  
   - 典型值范围：路由器<1ms，防火墙>10ms

### 知识点2：时延-利用率曲线

- **临界点分析**：

  $$
  D = \frac{D_0}{1-U} \quad (U < 1)
  $$

  - U=0.5 → D=2D₀
  - U=0.8 → D=5D₀

  - *实验现象：*  

    ```wireshark
    tcp.analysis.ack_rtt > 0.2  # 捕获高延迟TCP报文
    ```

### 知识点3：带宽测量实践

**理论带宽**：  
`1Gbps = 10⁹ bits/sec = 125MB/s`

**实测瓶颈**：  

```bash
# Windows带宽测试
iperf3 -c 10.0.0.2 -R  # 反向测试消除发送端瓶颈
```

| 影响因素          | 典型损耗 |
|-------------------|----------|
| TCP头部开销       | ~3%      |
| 协议握手时延      | RTT×1.5  |
| 链路层重传        | 1-10%    |

## 总结区

**核心考点**：

1. 时延类型判别（发送时延 vs 传播时延）
2. D-U公式计算（给定U值求时延倍增比）
3. 带宽单位换算（Gbps→MB/s）

**实验重点**：

```bash
# 全链路时延分析
mtr -n --tcp -P 443 --report-cycles 10 cloudflare.com
```

**典型误区**：

- 混淆传播时延（固定值）与传输时延（与数据量正相关）
- 忽视协议开销对实际吞吐量的影响（TCP 20B头+IP 20B头）

**进阶思考**：

- 当40Gbps链路利用率达到75%时，新增流量为何可能引发雪崩效应？
- 如何设计实验分离四种时延成分？（提示：使用不同长度ICMP报文）
