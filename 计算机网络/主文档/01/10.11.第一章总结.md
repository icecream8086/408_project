# 计算机网络体系结构概述

## 摘要

本课系统解析计算机网络基础架构，通过分层模型对比和量化指标分析，构建可验证的网络认知框架。结合 Wireshark 抓包实验设计，实现协议栈可视化验证。

## 主题

网络体系结构分层设计原理与实现差异，涵盖 OSI/TCP/IP 模型对比、关键性能参数测量方法、子网功能划分标准。核心问题：**如何通过抓包验证分层模型的实际运作？**

> 重点难点
>
> - 资源子网与通信子网的功能边界划分（设备/协议归属判定）
> - RTT 与吞吐量的实际测量方法差异
> - OSI 会话层/表示层在 TCP/IP 体系中的实现载体

## 线索区

### 知识点 1: 网络功能拓扑划分

- **资源子网**：端系统集群（主机+服务器+网络打印机）
- **通信子网**：传输设施（路由器+交换机+通信线路）
- 实验验证：`tcpdump -i eth0 host 192.168.1.100` 捕获特定主机通信流量

### 知识点 2: 性能指标体系

| 指标   | 测量方法            | 类比说明           |
| ------ | ------------------- | ------------------ |
| 带宽   | `iperf3 -c 目标IP`  | 高速公路最大车道数 |
| RTT    | `ping 目标IP`       | 快递包裹往返时间   |
| 吞吐量 | `iftop -n -i eth0`  | 实际通车流量统计   |
| 利用率 | `vnstat -l -i eth0` | 车道占用比例       |

### 知识点 3: 分层模型对比

**OSI vs TCP/IP 协议栈映射关系**：

```plaintext
+-------------+-------------------+
|   OSI模型   |   TCP/IP模型      |
+-------------+-------------------+
| 应用层      | 应用层            |
| 表示层      | (集成于应用层)     |
| 会话层      | (集成于应用层)     |
| 传输层      | 传输层            |
| 网络层      | 网际层            |
| 数据链路层  | 网络接口层        |
| 物理层      | 网络接口层        |
+-------------+-------------------+
```

**抓包验证实验**：

```bash
# 观测HTTP应用层流量
tshark -Y "http.request || http.response" -i eth0

# 分析TCP传输层握手过程
tcpdump -nn -v 'tcp port 80 and (tcp-syn|tcp-ack)!=0'
```

## 总结区

### 核心考点

1. **子网划分判定**：路由器属于通信子网，交换机根据工作层级判定（L2 交换机属通信子网，L3 交换机跨子网）
2. **性能指标计算**：有效吞吐量 = 窗口大小 / RTT（滑动窗口机制基础）
3. **模型差异本质**：TCP/IP 的"瘦腰架构"设计哲学（IP 层作为唯一抽象层）

### 实验延伸

- **拓扑复现建议**：使用 GNS3 构建含冗余路径的网络拓扑，通过 BGP 路由震荡观察 RTT 抖动
- **故障排查场景**：利用 Wireshark 分层统计功能定位协议层级故障（例：TCP 重传率>2%提示传输层异常）

### 重点记忆

- **MTU 默认值**：以太网**1500 字节**（超过需分片）
- **协议封装顺序**：应用数据 → 逐层添加头部 → 物理层比特流（抓包验证封装过程）

---

本结构通过分层标签强制关联理论模型与抓包实践，建议使用 Wireshark 的"Follow TCP Stream"功能直观观察应用层-传输层数据封装关系。
